{% extends "base.html" %}

{% block title %}Top - Adapte-moi si tu peux{% endblock %}

{% block content %}
<div class="container">
    <section class="popular-section">
        <div class="info-section">
        <div class="sparkles">âœ¨âœ¨âœ¨âœ¨âœ¨</div>
        <center><h2 class="section-title">Partez Ã  l'aventure !</h2></center>

        <div class="sparkles">âœ¨âœ¨âœ¨âœ¨âœ¨</div>
        <!-- <ul class="popular-list">
            <li><a href="#">Livre 1</a></li>
            <li><a href="#">Livre 2</a></li>
            <li><a href="#">Livre 3</a></li> -->
            <div class="stat-box">
                <p>Ce qu'on vous propose avec ce bouton, c'est de plonger dans nos collections, de prendre un livre au hasard et d'en dÃ©couvrir les adaptations au cinÃ©ma !</p>
            </div>
            <div class="gif-container">

              <img src="../../statics/images/book_door.gif" alt="Opening book door" class="clickable-gif" onclick="getRandomBook()">
              <script>
                function getRandomBook() {
                    fetch("/random_book")
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) {
                                document.getElementById("random-book-result").innerHTML = "<p>No books found ðŸ˜¢</p>";
                            } else {
                                // Create a clickable link to /book_to_film/<book_id>
                                document.getElementById("random-book-result").innerHTML = `
                                    <p>
                                        <strong>
                                            <a href="/book_to_film/${data.id}" class="book-link">
                                                ${data.title}
                                            </a>
                                        </strong> by ${data.author} ðŸ“–
                                    </p>
                                `;
                            }
                        })
                        .catch(error => {
                            console.error("Error fetching random book:", error);
                            document.getElementById("random-book-result").innerHTML = "<p>Something went wrong! ðŸš¨</p>";
                        });
                }
                </script>
                
                
<!-- This is where the book result will be displayed -->
<div id="random-book-result" class="result-box">

</div>
            </div>
        </div>
        <h3>Parcourez nos collections :</h3>
        <div class="emoji-buttons">
            <a href="{{ url_for('list_books') }}" class="circle-btn book-btn">ðŸ“–</a>
            <a href="{{ url_for('list_films') }}" class="circle-btn film-btn">ðŸŽ¬</a>
        </div>
    </section>
</div>
{% endblock %}